(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b595a86"],{"8f5b":function(e,t,s){"use strict";s("d215")},beab:function(e,t,s){"use strict";s.r(t);var r=s("0324"),o=s("e625");const c={class:"todo-warpper"};var n=Object(r["defineComponent"])({__name:"todo-record",setup(e){let t=Object(r["ref"])([]);const s=new o["a"];return s.connect("database",1).then(e=>{if(s.hasObjectStoreNames("todo")){const e=s.db.transaction(["todo"]).objectStore("todo").getAll();e.onsuccess=function(){t.value=e.result}}}),(e,s)=>{const o=Object(r["resolveComponent"])("el-table-column"),n=Object(r["resolveComponent"])("el-table");return Object(r["openBlock"])(),Object(r["createElementBlock"])("section",c,[Object(r["createVNode"])(n,{data:Object(r["unref"])(t)},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(o,{type:"index",label:"序号",align:"center",width:"80px"}),Object(r["createVNode"])(o,{prop:"todo",label:"代办事项",align:"center"}),Object(r["createVNode"])(o,{prop:"state",label:"完成状态",align:"center"}),Object(r["createVNode"])(o,{prop:"date",label:"完成时间",align:"center"})]),_:1},8,["data"])])}}}),a=(s("8f5b"),s("680e")),i=s.n(a);const l=i()(n,[["__scopeId","data-v-32c059d4"]]);t["default"]=l},d215:function(e,t,s){},e625:function(e,t,s){"use strict";class r{constructor(){this.db=null,this.request=null}connect(e,t=1){return new Promise((s,r)=>{this.request=window.indexedDB.open(e,t),this.request.onsuccess=e=>{this.db=this.request.result,s(e),this.success(e,"数据库打开成功")},this.request.onerror=e=>{r(e),this.error(e,"数据库打开报错")},this.request.onupgradeneeded=e=>{this.db=e.target.result,s(e),this.success(null,"数据库升级成功")}})}upgrad(e){this.db=e.target.result}add(e,t){const s=this.db.transaction([e],"readwrite").objectStore(e).add(t);s.onsuccess=e=>{this.success(e,"数据写入成功")},s.onerror=e=>{this.error(e,"数据写入失败")}}get(e,t){return new Promise((s,r)=>{const o=this.db.transaction([e]).objectStore(e).get(t);o.onsuccess=()=>{s(o.result),this.success.call(this,o.result,"")},o.onerror=this.error.call(this,"获取失败","")})}update(e,t){const s=this.db.transaction([e],"readwrite").objectStore(e).put(t);s.onsuccess=this.success.call(this,"数据更新成功",""),s.onerror=this.error.call(this,"数据更新失败","")}delete(e,t){const s=this.db.transaction([e],"readwrite").objectStore(e).delete(t);s.onsuccess=this.success.call(this,"数据删除成功",""),s.onerror=this.error.call(this,"数据删除失败","")}cursor(e){return new Promise((t,s)=>{if(this.hasObjectStoreNames(e)){const r=this.db.transaction([e]).objectStore(e).openCursor();r.onsuccess=e=>{t(e.target.result),this.success(e,"遍历表数据成功")},r.onerror=e=>{s(e),this.error(e,"遍历表数据失败")}}else s("表不存在")})}createIndex(e,t){this.db.transaction([e],"readonly").objectStore(e).index(t)}getIndex(e,t,s){return new Promise((r,o)=>{const c=this.db.transaction([e],"readonly").objectStore(e).index(t).get(s);c.onsuccess=e=>{const t=e.target.result;t?r(t):o(e)},c.onerror=e=>{o(e),this.error.call(this,"获取索引失败","")}})}hasObjectStoreNames(e){return this.db.objectStoreNames.contains(e)?(this.success(null,e+" 表已存在"),!0):(this.error(null,e+" 表不存在"),!1)}create(e,t,s){if(!this.db.objectStoreNames.contains(e)){let r=null;r=s.keyPath?this.db.createObjectStore(e,{keyPath:s.keyPath}):this.db.createObjectStore(e,{autoIncrement:!0}),t.forEach(e=>{const t=e.name,s=e.unique;r.createIndex(t,t,{unique:s})})}}success(e,t){console.log(e,t||"success")}error(e,t){console.log(e,t||"error")}}t["a"]=r}}]);
//# sourceMappingURL=chunk-4b595a86.6865fe3b.js.map